<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/globals.css" />
		<script src="https://cdn.tailwindcss.com"></script>
		<title>Edit Recipe</title>
	</head>
	<body class="bg-slate-100 h-dvh">
		<%- include('../partials/_navbar.ejs') %>
		<section class="container mx-auto">
			<div class="flex items-center justify-center h-dvh">
				<div class="bg-white w-fit p-16 rounded-3xl flex flex-col gap-8">
					<h1 class="font-semibold text-4xl">Edit Recipe</h1>
					<form
						action="/recipes/<%= recipe._id %>?_method=PUT"
						method="POST"
						class="flex flex-col gap-8 w-96"
					>
						<div class="flex flex-col gap-2">
							<label for="name">Recipe Name</label>
							<input
								type="text"
								id="name"
								name="name"
								value="<%= recipe.name %>"
								class="bg-[#F7FBFF] border border-[#D4D7E3] rounded-lg max-h-10 px-2 py-3 placeholder:font-extralight placeholder:text-sm text-sm"
								required
							/>
						</div>
						<div class="flex flex-col gap-2">
							<label for="ingredients">Ingredients</label>
							<select
								id="ingredients"
								name="ingredients"
								multiple
								class="bg-[#F7FBFF] border border-[#D4D7E3] rounded-lg h-32 px-2 py-3 placeholder:font-extralight placeholder:text-sm overflow-auto"
							>
								<% ingredients.forEach(ingredient => { %>
                  <option
                    class="p-1 my-1 rounded-md text-sm hover:bg-[#D4E4FF]"
                    value="<%= ingredient._id %>"
                    <% if (recipe.ingredients.some(i => i.equals(ingredient._id))) { %>selected<% } %> 
                  >
                    <%= ingredient.name %>
                  </option>
								<% }) %>
							</select>
						</div>
						<div class="flex flex-col gap-2">
							<label for="instructions">Instructions</label>
							<textarea
								class="bg-[#F7FBFF] border border-[#D4D7E3] rounded-lg h-40 px-2 py-3 placeholder:font-extralight placeholder:text-sm text-sm"
								id="instructions"
								name="instructions"
							>
<%= recipe.instructions %></textarea
							>
						</div>

						<button
							type="submit"
							class="bg-[#162D3A] text-lg text-white font-normal rounded-lg py-1 mt-4 hover:bg-[#1E4AE9] border border-[#162D3A]"
						>
							Update Recipe
						</button>
					</form>
				</div>
			</div>
		</section>
	</body>
</html>
